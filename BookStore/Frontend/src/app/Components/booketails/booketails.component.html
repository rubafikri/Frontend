<ngx-loading-bar></ngx-loading-bar>

<ng-container *ngIf="book">
  <div
    class="mt-2 p-2"
    style="background-color: #019a95; color: white; padding-left: 20px"
  >
    <nav aria-label="breadcrumb">
      <ol class="breadcrumb">
        <li class="breadcrumb-item" style="padding-right: 100px">
          <a>ุงูุฑุฆูุณูุฉ</a>
        </li>
        <li
          class="breadcrumb-item active"
          aria-current="page"
          style="color: white"
        >
          ุดุฑุงุก
        </li>
        <li
          class="breadcrumb-item active"
          aria-current="page"
          style="color: white"
        >
          ูุชุงุจ
        </li>
      </ol>
    </nav>
  </div>

  <div class="container mt-5">
    <div class="row justify-content-center">
      <div class="col-md-6 col-12 ff">
        <img [src]="imgSrc + book.image" alt="" width="270px" height="400px" />
        <div class="col-md-5 mt-5 col-12 pe-3">
          <h4>{{ book.name }}</h4>
          <p>{{ book.author.name }}</p>

          <div class="stars">
            <ngb-rating
              [(rate)]="currentRate"
              [max]="5"
              class="color"
              [readonly]="true"
              style="color: rgb(255, 255, 0)"
            ></ngb-rating>
            ({{ currentRate }})
          </div>

          <div class="d-flex" style="justify-items: first baseline">
            <p class="fw-bolder w-50">ุฏุงุฑ ุงููุดุฑ :</p>
            <p>{{ book.publisher.name }}</p>
          </div>
          <div class="d-flex">
            <p class="fw-bolder w-50">ุงุณู ุงููุคูู :</p>
            <p>{{ book.author.name }}</p>
          </div>
          <div class="d-flex">
            <p class="fw-bolder w-50">ุงููุชุฑุฌู :</p>
            <p>ุงุญูุฏ</p>
          </div>
          <div class="d-flex">
            <p class="fw-bolder w-50">ุณูุฉ ุงููุดุฑ :</p>
            <p>{{ book.publishYear }}</p>
          </div>
          <div class="d-flex">
            <p class="fw-bolder w-50">ุนุฏุฏ ุงูุตูุญุงุช :</p>
            <p>{{ book.pageCount }}</p>
          </div>
        </div>
      </div>

      <div class="col-md-6 col-12">
        <div
          class="card pt-3 mt-5"
          style="width: 25rem; height: 20rem; background-color: #e1e1e1"
        >
          <div
            class="d-flex flex-row mt-5"
            style="justify-content: space-evenly"
          >
            <h4 class="card-title" style="color: #019a95; font-weight: bold">
              ุณุนุฑ ุงููุชุงุจ
            </h4>
            <div class="d-flex flex-row">
              <h4 class="card-title" style="color: #153e76; font-weight: bold">
                {{ book.price }}.00$
              </h4>
              <h5
                class="card-title"
                style="color: grey; font-weight: bold"
                *ngIf="book.discount > 0"
              >
                {{ book.discount }}.00$
              </h5>
            </div>
          </div>
          <form [formGroup]="SaleForm" (ngSubmit)="makeSale()">
            <div
              class="d-flex flex-row mt-5"
              style="justify-content: space-evenly"
            >
              <h4 class="card-title" style="color: #019a95; font-weight: bold">
                ุงููููุฉ
              </h4>
              <input
                type="number"
                formControlName="amount"
                class="form-control"
                style="width: 100px"
              />
            </div>
            <div
              class="d-flex flex-row mt-4"
              style="justify-content: space-evenly"
            >
              <div
                class="d-flex flex-row mt-4"
                style="justify-content: space-evenly"
              >
                <button
                  type="submit"
                  class="btn"
                  style="background-color: #019a95; width: 150px"
                >
                  <img src="./assets/4.png" alt="" width="30px" />
                  <span style="color: white"> ุงุดุชุฑู ุงูุขู </span>
                </button>
              </div>
              <div>
                <a
                  *ngIf="adedd == false"
                  class="btn mt-4"
                  style="background-color: #019a95; width: 150px"
                  (click)="addToFavorite(book.id)"
                  >๐ค
                  <span style="color: white"> ุงุถู ุงูู ุงูููุถูุฉ </span>
                </a>
                <a
                  *ngIf="adedd == true"
                  class="btn mt-4"
                  style="background-color: #019a95; width: 150px"
                  (click)="remove(book.id)"
                  >โค๏ธ
                  <span style="color: white"> ุฅุฒุงูุฉ ูู ุงููุถูุฉ </span>
                </a>
              </div>
            </div>
          </form>
        </div>
      </div>
    </div>
    <div class="container mt-5 mb-5">
      <ul ngbNav #nav="ngbNav" class="nav-tabs">
        <li ngbNavItem>
          <a ngbNavLink>ุญูู ุงููุชุงุจ </a>
          <ng-template ngbNavContent>
            <div class="row mt-5 mb-3">
              <div class="card-body">
                <p class="card-text">
                  {{ book.about }}
                </p>
              </div>
            </div>
          </ng-template>
        </li>
        <li ngbNavItem>
          <a ngbNavLink>ุชูููู ุงููุฑุงุก ูููุชุงุจ </a>
          <ng-template ngbNavContent>
            <h1></h1>
            <div class="stars" *ngFor="let rr of bookReview">
              <ngb-rating
                [(rate)]="rr.rate"
                [max]="5"
                class="color"
                [readonly]="true"
                style="color: rgb(255, 255, 0)"
              ></ngb-rating>
              ({{ rr.rate }})
              <h2>{{ rr.comment }}</h2>
            </div>
          </ng-template>
        </li>
        <li ngbNavItem>
          <a ngbNavLink>ุชูููู ุงููุชุงุจ </a>
          <ng-template ngbNavContent>
            <form [formGroup]="RatingForm" (ngSubmit)="onSubmit()">
              <ngb-rating
                [(rate)]="initialRate"
                formControlName="rating"
                [max]="5"
                class="color"
                style="color: rgb(255, 255, 0)"
              ></ngb-rating>
              ({{ initialRate }})
              <textarea
                type="text"
                placeholder="ุฃุถู ุชุนููู ุนู ุงููุชุงุจ "
                class="form-control"
                formControlName="comment"
              ></textarea>
              <button type="submit" class="btn btn-primary mt-4">
                ุงุถู ุชุนููู
              </button>
            </form>
          </ng-template>
          <ng-template ngbNavContent>
            <h1 style="color: red; font-weight: bolder">
              ูุง ููููู ุชูููู ุงููุชุงุจ ุฅูุง ุฅุฐุง ููุช ุจุดุฑุงุกู
            </h1>
          </ng-template>
        </li>
      </ul>

      <div [ngbNavOutlet]="nav" class="mt-2"></div>
    </div>
  </div>
</ng-container>
